import{u as D,a as N,b as T,r as p,g as _,j as t,B as o,M as $,T as F,c as L,P as Z,R as k,d as a,e as B,C as s,f as d,h as E,L as H}from"./index-Mm2wQvPC.js";function P(){return D().map}const x={lat:33.749,lng:-84.388},V=h=>H.divIcon({className:"custom-marker",html:`<div style="background-color: ${h}; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 8px rgba(0,0,0,0.3);"></div>`,iconSize:[30,30],iconAnchor:[15,15],popupAnchor:[0,-15]}),q=()=>{const h=N(),i=T(),[c,w]=p.useState([]),[l,m]=p.useState(null),[n,C]=p.useState(!1);p.useEffect(()=>{w(_())},[]);const R=e=>e>=4.5?i.palette.secondary.main:e>=4?i.palette.primary.main:i.palette.primary.light,z=l?c.filter(e=>e.location.city===l):c,S=()=>{if(l==="Nashville")return[36.1627,-86.7816];if(!l)return[x.lat,x.lng];const e=c.find(r=>r.location.city===l);return e?[e.location.lat,e.location.lng]:[x.lat,x.lng]},W=()=>l?13:11,M=e=>{console.log(`Navigate to restaurant with ID: ${e}`),h(`/restaurant/${e}`)},I=Array.from(new Set(c.map(e=>e.location.city))).sort(),A=()=>{const e=P();return t.jsx("div",{className:"leaflet-bottom leaflet-left",style:{marginBottom:"20px",marginLeft:"10px"},children:t.jsxs("div",{className:"leaflet-control-zoom leaflet-bar leaflet-control",children:[t.jsx("a",{className:"leaflet-control-zoom-in",href:"#",title:"Zoom in",role:"button","aria-label":"Zoom in",onClick:r=>{r.preventDefault(),e.zoomIn()},children:"+"}),t.jsx("a",{className:"leaflet-control-zoom-out",href:"#",title:"Zoom out",role:"button","aria-label":"Zoom out",onClick:r=>{r.preventDefault(),e.zoomOut()},children:"-"})]})})};return t.jsxs(o,{sx:{height:"600px",width:"100%",position:"relative",borderRadius:2,overflow:"hidden",border:`1px solid ${i.palette.divider}`},children:[t.jsxs($,{center:S(),zoom:W(),style:{height:"100%",width:"100%"},zoomControl:!1,scrollWheelZoom:!0,attributionControl:!1,children:[t.jsx(F,{url:"https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> © <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> © <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> © <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors'}),t.jsx(A,{}),z.map(e=>{var r,g,b;return t.jsx(L,{position:[e.location.lat,e.location.lng],icon:V(R(e.rating)),children:t.jsx(Z,{closeButton:!1,children:t.jsxs(o,{sx:{minWidth:220,maxWidth:250,cursor:"pointer","&:hover":{opacity:.9}},onClick:()=>M(e.id),children:[e.photos&&e.photos.length>0&&t.jsxs(o,{sx:{position:"relative",width:"100%",height:"150px",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"},children:[t.jsx("img",{src:`/food-blog/${e.photos[0].startsWith("/")?e.photos[0].substring(1):e.photos[0]}`,alt:e.name,style:{width:"100%",height:"150px",objectFit:"cover"}}),t.jsxs(o,{sx:{position:"absolute",top:8,right:8,display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsxs(o,{sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",p:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:.5},children:[t.jsx(k,{value:e.rating,precision:.1,size:"small",readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"white"}}}),t.jsx(a,{variant:"caption",sx:{fontWeight:"bold",lineHeight:"1.2"},children:e.rating.toFixed(1)}),t.jsx(a,{variant:"caption",sx:{fontWeight:300,lineHeight:"1.2"},children:"Our"})]}),e.googleRating&&t.jsxs(o,{sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",p:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:.5},children:[t.jsx(k,{value:e.googleRating,precision:.1,size:"small",readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"#fb8c00"},"& .MuiRating-iconEmpty":{borderColor:"#fb8c00"}}}),t.jsx(a,{variant:"caption",sx:{fontWeight:"bold",lineHeight:"1.2"},children:e.googleRating.toFixed(1)}),t.jsx(B,{sx:{fontSize:"0.9rem",color:"white",ml:.25}})]})]})]}),t.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:.5},children:e.name}),t.jsxs(o,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:1},children:[t.jsx(s,{label:e.cuisine,size:"small",sx:{backgroundColor:d(i.palette.primary.main,.1),color:i.palette.primary.main,fontWeight:500,fontSize:"0.7rem"}}),t.jsx(s,{label:e.priceRange,size:"small",sx:{backgroundColor:d(i.palette.secondary.main,.1),color:i.palette.secondary.main,fontWeight:500,fontSize:"0.7rem"}}),t.jsx(s,{label:e.location.city,size:"small",sx:{backgroundColor:d(i.palette.primary.dark,.07),color:i.palette.primary.dark,fontWeight:500,fontSize:"0.7rem"}})]}),e.parking&&t.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[[...Array(((r=e.parking)==null?void 0:r.count)||0)].map((X,O)=>{var f,u,y,j,v;return t.jsx("img",{src:`/food-blog/${(u=(f=e.parking)==null?void 0:f.icon)!=null&&u.startsWith("/")?(j=(y=e.parking)==null?void 0:y.icon)==null?void 0:j.substring(1):(v=e.parking)==null?void 0:v.icon}`,alt:"Parking Rating",style:{width:"16px",height:"16px",marginRight:"2px"}},O)}),((g=e.parking)==null?void 0:g.description)&&t.jsxs(a,{variant:"caption",sx:{ml:.5,fontSize:"0.7rem",color:"text.secondary"},children:["(",(b=e.parking)==null?void 0:b.description,")"]})]}),t.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Visited: ",new Date(e.visitDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),t.jsx(a,{variant:"body2",sx:{fontSize:"0.85rem"},children:e.review}),t.jsx(o,{sx:{mt:1.5,p:1,bgcolor:d(i.palette.primary.main,.1),borderRadius:1,textAlign:"center"},children:t.jsx(a,{variant:"caption",sx:{color:i.palette.primary.main,fontWeight:500},children:"Click to view details"})})]})})},e.id)})]}),t.jsxs(E,{elevation:2,sx:{position:"absolute",top:16,right:16,zIndex:400,p:1.5,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)",borderRadius:2,maxWidth:250,transition:"all 0.3s ease",transform:n?"translateX(calc(100% - 48px))":"translateX(0)","&:hover":{boxShadow:3}},children:[t.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:n?0:.5},children:[t.jsx(a,{variant:"h6",sx:{color:i.palette.primary.main,fontWeight:600,mb:0,whiteSpace:"nowrap"},children:n?"":"Restaurant Visits"}),t.jsx(o,{onClick:()=>C(!n),sx:{cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:28,minHeight:28,width:28,height:28,borderRadius:"50%",border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",fontSize:"18px",fontWeight:"bold",color:"primary.main","&:hover":{bgcolor:"rgba(0,0,0,0.05)",boxShadow:"0 0 5px rgba(0,0,0,0.2)"},zIndex:2},children:n?"«":"»"})]}),!n&&t.jsxs(t.Fragment,{children:[t.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:1.5},children:"Tracking memorable dining experiences from our travels"}),t.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[t.jsx(s,{label:"All",onClick:()=>m(null),color:l?"default":"primary",size:"small",clickable:!0}),I.map(e=>t.jsx(s,{label:e,onClick:()=>m(e),color:l===e?"primary":"default",size:"small",clickable:!0},e))]})]})]})]})};export{q as default};
