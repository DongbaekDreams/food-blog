import{u as _,a as D,b as N,r as d,g as T,j as t,B as i,M as $,T as F,c as L,P as Z,R as v,d as a,e as B,C as s,f as p,h as E,L as H}from"./index-KlJaXY0e.js";function P(){return _().map}const m={lat:33.749,lng:-84.388},V=h=>H.divIcon({className:"custom-marker",html:`<div style="background-color: ${h}; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 8px rgba(0,0,0,0.3);"></div>`,iconSize:[30,30],iconAnchor:[15,15],popupAnchor:[0,-15]}),q=()=>{const h=D(),o=N(),[c,w]=d.useState([]),[r,x]=d.useState(null),[n,C]=d.useState(!1);d.useEffect(()=>{w(T())},[]);const z=e=>e>=4.5?o.palette.secondary.main:e>=4?o.palette.primary.main:o.palette.primary.light,R=r?c.filter(e=>e.location.city===r):c,S=()=>{if(r==="Nashville")return[36.1627,-86.7816];if(!r)return[m.lat,m.lng];const e=c.find(l=>l.location.city===r);return e?[e.location.lat,e.location.lng]:[m.lat,m.lng]},W=()=>r?13:11,M=e=>{console.log(`Navigate to restaurant with ID: ${e}`),h(`/restaurant/${e}`)},O=Array.from(new Set(c.map(e=>e.location.city))).sort(),I=()=>{const e=P();return t.jsx("div",{className:"leaflet-bottom leaflet-left",style:{marginBottom:"20px",marginLeft:"10px"},children:t.jsxs("div",{className:"leaflet-control-zoom leaflet-bar leaflet-control",children:[t.jsx("a",{className:"leaflet-control-zoom-in",href:"#",title:"Zoom in",role:"button","aria-label":"Zoom in",onClick:l=>{l.preventDefault(),e.zoomIn()},children:"+"}),t.jsx("a",{className:"leaflet-control-zoom-out",href:"#",title:"Zoom out",role:"button","aria-label":"Zoom out",onClick:l=>{l.preventDefault(),e.zoomOut()},children:"-"})]})})};return t.jsxs(i,{sx:{height:"600px",width:"100%",position:"relative",borderRadius:2,overflow:"hidden",border:`1px solid ${o.palette.divider}`},children:[t.jsxs($,{center:S(),zoom:W(),style:{height:"100%",width:"100%"},zoomControl:!1,scrollWheelZoom:!0,attributionControl:!1,children:[t.jsx(F,{url:o.palette.mode==="dark"?"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png":"https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}{r}.png",attribution:o.palette.mode==="dark"?'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors':'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> &copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors'}),t.jsx(I,{}),R.map(e=>{var l,g,f;return t.jsx(L,{position:[e.location.lat,e.location.lng],icon:V(z(e.rating)),children:t.jsx(Z,{closeButton:!1,children:t.jsxs(i,{sx:{minWidth:220,maxWidth:250,cursor:"pointer","&:hover":{opacity:.9}},onClick:()=>M(e.id),children:[e.photos&&e.photos.length>0&&t.jsxs(i,{sx:{position:"relative",width:"100%",height:"150px",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"},children:[t.jsx("img",{src:`/food-blog/${e.photos[0].startsWith("/")?e.photos[0].substring(1):e.photos[0]}`,alt:e.name,style:{width:"100%",height:"150px",objectFit:"cover"}}),t.jsxs(i,{sx:{position:"absolute",top:8,right:8,display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsxs(i,{sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",p:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:.5},children:[t.jsx(v,{value:e.rating,precision:.1,size:"small",readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"white"}}}),t.jsx(a,{variant:"caption",sx:{fontWeight:"bold",lineHeight:"1.2"},children:e.rating.toFixed(1)}),t.jsx(a,{variant:"caption",sx:{fontWeight:300,lineHeight:"1.2"},children:"Our"})]}),e.googleRating&&t.jsxs(i,{sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",p:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:.5},children:[t.jsx(v,{value:e.googleRating,precision:.1,size:"small",readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"#fb8c00"},"& .MuiRating-iconEmpty":{borderColor:"#fb8c00"}}}),t.jsx(a,{variant:"caption",sx:{fontWeight:"bold",lineHeight:"1.2"},children:e.googleRating.toFixed(1)}),t.jsx(B,{sx:{fontSize:"0.9rem",color:"white",ml:.25}})]})]})]}),t.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:.5},children:e.name}),t.jsxs(i,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:1},children:[t.jsx(s,{label:e.cuisine,size:"small",sx:{backgroundColor:o.palette.mode==="dark"?o.palette.primary.dark:p(o.palette.primary.main,.1),color:o.palette.mode==="dark"?o.palette.common.white:o.palette.primary.main,fontWeight:600,fontSize:"0.7rem"}}),t.jsx(s,{label:e.priceRange,size:"small",sx:{backgroundColor:o.palette.mode==="dark"?o.palette.secondary.dark:p(o.palette.secondary.main,.1),color:o.palette.mode==="dark"?o.palette.common.white:o.palette.secondary.main,fontWeight:600,fontSize:"0.7rem"}}),t.jsx(s,{label:e.location.city,size:"small",sx:{backgroundColor:o.palette.mode==="dark"?o.palette.primary.dark:p(o.palette.primary.dark,.07),color:o.palette.mode==="dark"?o.palette.common.white:o.palette.primary.dark,fontWeight:600,fontSize:"0.7rem"}})]}),e.parking&&t.jsxs(i,{sx:{display:"flex",alignItems:"center",mb:1},children:[[...Array(((l=e.parking)==null?void 0:l.count)||0)].map((X,A)=>{var b,u,y,k,j;return t.jsx("img",{src:`/food-blog/${(u=(b=e.parking)==null?void 0:b.icon)!=null&&u.startsWith("/")?(k=(y=e.parking)==null?void 0:y.icon)==null?void 0:k.substring(1):(j=e.parking)==null?void 0:j.icon}`,alt:"Parking Rating",style:{width:"16px",height:"16px",marginRight:"2px"}},A)}),((g=e.parking)==null?void 0:g.description)&&t.jsxs(a,{variant:"caption",sx:{ml:.5,fontSize:"0.7rem",color:"text.secondary"},children:["(",(f=e.parking)==null?void 0:f.description,")"]})]}),t.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Visited: ",new Date(e.visitDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),t.jsx(a,{variant:"body2",sx:{fontSize:"0.85rem"},children:e.review}),t.jsx(i,{sx:{mt:1.5,p:1,bgcolor:p(o.palette.primary.main,.1),borderRadius:1,textAlign:"center"},children:t.jsx(a,{variant:"caption",sx:{color:o.palette.primary.main,fontWeight:500},children:"Click to view details"})})]})})},e.id)})]}),t.jsxs(E,{elevation:2,sx:{position:"absolute",top:16,right:16,zIndex:400,p:1.5,backgroundColor:p(o.palette.background.paper,o.palette.mode==="light"?.9:.85),backdropFilter:"blur(4px)",borderRadius:2,maxWidth:250,border:`1px solid ${o.palette.divider}`,transition:"all 0.3s ease",transform:n?"translateX(calc(100% - 48px))":"translateX(0)","&:hover":{boxShadow:3}},children:[t.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:n?0:.5},children:[t.jsx(a,{variant:"h6",sx:{color:o.palette.primary.main,fontWeight:600,mb:0,whiteSpace:"nowrap"},children:n?"":"Restaurant Visits"}),t.jsx(i,{onClick:()=>C(!n),sx:{cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:28,minHeight:28,width:28,height:28,borderRadius:"50%",border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",fontSize:"18px",fontWeight:"bold",color:"primary.main","&:hover":{bgcolor:"action.hover",boxShadow:"0 0 5px rgba(0,0,0,0.2)"},zIndex:2},children:n?"«":"»"})]}),!n&&t.jsxs(t.Fragment,{children:[t.jsx(a,{variant:"body2",sx:{color:o.palette.text.secondary,mb:1.5},children:"Tracking memorable dining experiences from our travels"}),t.jsxs(i,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[t.jsx(s,{label:"All",onClick:()=>x(null),color:r?"default":"primary",size:"small",clickable:!0}),O.map(e=>t.jsx(s,{label:e,onClick:()=>x(e),color:r===e?"primary":"default",size:"small",clickable:!0},e))]})]})]})]})};export{q as default};
