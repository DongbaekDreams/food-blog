import{c as O,l as j,a as w,e as z,b as M,r as f,i as W,d as _,j as i,u as S,f as I,g as P,B as c,M as L,T as D,R as v,h as p,C as u,k as b,P as A,L as E}from"./index-BELwkxrJ.js";const T=O(function({position:n,...t},a){const l=new j.Marker(n,t);return w(l,z(a,{overlayContainer:l}))},function(n,t,a){t.position!==a.position&&n.setLatLng(t.position),t.icon!=null&&t.icon!==a.icon&&n.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==a.zIndexOffset&&n.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==a.opacity&&n.setOpacity(t.opacity),n.dragging!=null&&t.draggable!==a.draggable&&(t.draggable===!0?n.dragging.enable():n.dragging.disable())}),F=M(function(n,t){const a=new j.Popup(n,t.overlayContainer);return w(a,t)},function(n,t,{position:a},l){f.useEffect(function(){const{instance:r}=n;function g(d){d.popup===r&&(r.update(),l(!0))}function h(d){d.popup===r&&l(!1)}return t.map.on({popupopen:g,popupclose:h}),t.overlayContainer==null?(a!=null&&r.setLatLng(a),r.openOn(t.map)):t.overlayContainer.bindPopup(r),function(){var x;t.map.off({popupopen:g,popupclose:h}),(x=t.overlayContainer)==null||x.unbindPopup(),t.map.removeLayer(r)}},[n,t,l,a])});var y={},q=W;Object.defineProperty(y,"__esModule",{value:!0});var C=y.default=void 0;B(f);var N=q(_()),$=i;function R(o){if(typeof WeakMap!="function")return null;var n=new WeakMap,t=new WeakMap;return(R=function(a){return a?t:n})(o)}function B(o,n){if(o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var t=R(n);if(t&&t.has(o))return t.get(o);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in o)if(s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)){var r=l?Object.getOwnPropertyDescriptor(o,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=o[s]}return a.default=o,t&&t.set(o,a),a}C=y.default=(0,N.default)((0,$.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");const m={lat:33.749,lng:-84.388},H=o=>E.divIcon({className:"custom-marker",html:`<div style="background-color: ${o}; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 8px rgba(0,0,0,0.3);"></div>`,iconSize:[30,30],iconAnchor:[15,15],popupAnchor:[0,-15]}),Z=()=>{S();const o=I(),[n,t]=f.useState([]),[a,l]=f.useState(null);f.useEffect(()=>{t(P())},[]);const s=e=>e>=4.5?o.palette.secondary.main:e>=4?o.palette.primary.main:o.palette.primary.light,r=a?n.filter(e=>e.location.city===a):n,g=()=>{if(a==="Nashville")return[36.1627,-86.7816];if(!a)return[m.lat,m.lng];const e=n.find(k=>k.location.city===a);return e?[e.location.lat,e.location.lng]:[m.lat,m.lng]},h=()=>a?13:11,d=e=>{console.log(`Navigate to restaurant with ID: ${e}`)},x=Array.from(new Set(n.map(e=>e.location.city))).sort();return i.jsxs(c,{sx:{height:"600px",width:"100%",position:"relative",borderRadius:2,overflow:"hidden",border:`1px solid ${o.palette.divider}`},children:[i.jsxs(L,{center:g(),zoom:h(),style:{height:"100%",width:"100%"},zoomControl:!0,scrollWheelZoom:!0,attributionControl:!1,children:[i.jsx(D,{url:"https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> © <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> © <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> © <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors'}),r.map(e=>i.jsx(T,{position:[e.location.lat,e.location.lng],icon:H(s(e.rating)),eventHandlers:{click:()=>{d(e.id)}},children:i.jsx(F,{closeButton:!1,children:i.jsxs(c,{sx:{minWidth:220,maxWidth:250},children:[e.photos&&e.photos.length>0&&i.jsxs(c,{sx:{position:"relative",width:"100%",height:"150px",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"},children:[i.jsx("img",{src:`/food-blog/${e.photos[0].startsWith("/")?e.photos[0].substring(1):e.photos[0]}`,alt:e.name,style:{width:"100%",height:"150px",objectFit:"cover"}}),i.jsxs(c,{sx:{position:"absolute",top:8,right:8,display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs(c,{sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",p:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:.5},children:[i.jsx(v,{value:e.rating,precision:.1,size:"small",readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"white"}}}),i.jsx(p,{variant:"caption",sx:{fontWeight:"bold",lineHeight:"1.2"},children:e.rating.toFixed(1)}),i.jsx(p,{variant:"caption",sx:{fontWeight:300,lineHeight:"1.2"},children:"Our"})]}),e.googleRating&&i.jsxs(c,{sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",p:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:.5},children:[i.jsx(v,{value:e.googleRating,precision:.1,size:"small",readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"#fb8c00"},"& .MuiRating-iconEmpty":{borderColor:"#fb8c00"}}}),i.jsx(p,{variant:"caption",sx:{fontWeight:"bold",lineHeight:"1.2"},children:e.googleRating.toFixed(1)}),i.jsx(C,{sx:{fontSize:"0.9rem",color:"white",ml:.25}})]})]})]}),i.jsx(p,{variant:"h6",sx:{fontWeight:600,mb:.5},children:e.name}),i.jsxs(c,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:1},children:[i.jsx(u,{label:e.cuisine,size:"small",sx:{backgroundColor:b(o.palette.primary.main,.1),color:o.palette.primary.main,fontWeight:500,fontSize:"0.7rem"}}),i.jsx(u,{label:e.priceRange,size:"small",sx:{backgroundColor:b(o.palette.secondary.main,.1),color:o.palette.secondary.main,fontWeight:500,fontSize:"0.7rem"}}),i.jsx(u,{label:e.location.city,size:"small",sx:{backgroundColor:b(o.palette.primary.dark,.07),color:o.palette.primary.dark,fontWeight:500,fontSize:"0.7rem"}})]}),i.jsxs(p,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Visited: ",new Date(e.visitDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),i.jsx(p,{variant:"body2",sx:{fontSize:"0.85rem"},children:e.review})]})})},e.id))]}),i.jsxs(A,{elevation:2,sx:{position:"absolute",top:16,left:16,zIndex:1e3,p:1.5,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)",borderRadius:2,maxWidth:300},children:[i.jsx(p,{variant:"h6",sx:{color:o.palette.primary.main,fontWeight:600,mb:.5},children:"Restaurant Visits"}),i.jsx(p,{variant:"body2",color:"text.secondary",sx:{mb:1.5},children:"Tracking memorable dining experiences from our travels"}),i.jsxs(c,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[i.jsx(u,{label:"All",onClick:()=>l(null),color:a?"default":"primary",size:"small",clickable:!0}),x.map(e=>i.jsx(u,{label:e,onClick:()=>l(e),color:a===e?"primary":"default",size:"small",clickable:!0},e))]})]})]})};export{Z as default};
