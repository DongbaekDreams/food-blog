import{u as w,a as R,r as d,g as k,j as t,B as o,M as C,T as z,b as W,P as S,R as h,c as a,d as M,C as l,e as n,f as A,L as T}from"./index-DB5DdUAj.js";const c={lat:33.749,lng:-84.388},D=p=>T.divIcon({className:"custom-marker",html:`<div style="background-color: ${p}; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 8px rgba(0,0,0,0.3);"></div>`,iconSize:[30,30],iconAnchor:[15,15],popupAnchor:[0,-15]}),_=()=>{const p=w(),i=R(),[s,g]=d.useState([]),[r,x]=d.useState(null);d.useEffect(()=>{g(k())},[]);const m=e=>e>=4.5?i.palette.secondary.main:e>=4?i.palette.primary.main:i.palette.primary.light,b=r?s.filter(e=>e.location.city===r):s,u=()=>{if(r==="Nashville")return[36.1627,-86.7816];if(!r)return[c.lat,c.lng];const e=s.find(v=>v.location.city===r);return e?[e.location.lat,e.location.lng]:[c.lat,c.lng]},f=()=>r?13:11,y=e=>{console.log(`Navigate to restaurant with ID: ${e}`),p(`/restaurant/${e}`)},j=Array.from(new Set(s.map(e=>e.location.city))).sort();return t.jsxs(o,{sx:{height:"600px",width:"100%",position:"relative",borderRadius:2,overflow:"hidden",border:`1px solid ${i.palette.divider}`},children:[t.jsxs(C,{center:u(),zoom:f(),style:{height:"100%",width:"100%"},zoomControl:!0,scrollWheelZoom:!0,attributionControl:!1,children:[t.jsx(z,{url:"https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> © <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> © <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> © <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors'}),b.map(e=>t.jsx(W,{position:[e.location.lat,e.location.lng],icon:D(m(e.rating)),children:t.jsx(S,{closeButton:!1,children:t.jsxs(o,{sx:{minWidth:220,maxWidth:250,cursor:"pointer","&:hover":{opacity:.9}},onClick:()=>y(e.id),children:[e.photos&&e.photos.length>0&&t.jsxs(o,{sx:{position:"relative",width:"100%",height:"150px",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"},children:[t.jsx("img",{src:`/food-blog/${e.photos[0].startsWith("/")?e.photos[0].substring(1):e.photos[0]}`,alt:e.name,style:{width:"100%",height:"150px",objectFit:"cover"}}),t.jsxs(o,{sx:{position:"absolute",top:8,right:8,display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsxs(o,{sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",p:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:.5},children:[t.jsx(h,{value:e.rating,precision:.1,size:"small",readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"white"}}}),t.jsx(a,{variant:"caption",sx:{fontWeight:"bold",lineHeight:"1.2"},children:e.rating.toFixed(1)}),t.jsx(a,{variant:"caption",sx:{fontWeight:300,lineHeight:"1.2"},children:"Our"})]}),e.googleRating&&t.jsxs(o,{sx:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",p:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:.5},children:[t.jsx(h,{value:e.googleRating,precision:.1,size:"small",readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"#fb8c00"},"& .MuiRating-iconEmpty":{borderColor:"#fb8c00"}}}),t.jsx(a,{variant:"caption",sx:{fontWeight:"bold",lineHeight:"1.2"},children:e.googleRating.toFixed(1)}),t.jsx(M,{sx:{fontSize:"0.9rem",color:"white",ml:.25}})]})]})]}),t.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:.5},children:e.name}),t.jsxs(o,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:1},children:[t.jsx(l,{label:e.cuisine,size:"small",sx:{backgroundColor:n(i.palette.primary.main,.1),color:i.palette.primary.main,fontWeight:500,fontSize:"0.7rem"}}),t.jsx(l,{label:e.priceRange,size:"small",sx:{backgroundColor:n(i.palette.secondary.main,.1),color:i.palette.secondary.main,fontWeight:500,fontSize:"0.7rem"}}),t.jsx(l,{label:e.location.city,size:"small",sx:{backgroundColor:n(i.palette.primary.dark,.07),color:i.palette.primary.dark,fontWeight:500,fontSize:"0.7rem"}})]}),t.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Visited: ",new Date(e.visitDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),t.jsx(a,{variant:"body2",sx:{fontSize:"0.85rem"},children:e.review}),t.jsx(o,{sx:{mt:1.5,p:1,bgcolor:n(i.palette.primary.main,.1),borderRadius:1,textAlign:"center"},children:t.jsx(a,{variant:"caption",sx:{color:i.palette.primary.main,fontWeight:500},children:"Click to view details"})})]})})},e.id))]}),t.jsxs(A,{elevation:2,sx:{position:"absolute",top:16,left:16,zIndex:1e3,p:1.5,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)",borderRadius:2,maxWidth:300},children:[t.jsx(a,{variant:"h6",sx:{color:i.palette.primary.main,fontWeight:600,mb:.5},children:"Restaurant Visits"}),t.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:1.5},children:"Tracking memorable dining experiences from our travels"}),t.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[t.jsx(l,{label:"All",onClick:()=>x(null),color:r?"default":"primary",size:"small",clickable:!0}),j.map(e=>t.jsx(l,{label:e,onClick:()=>x(e),color:r===e?"primary":"default",size:"small",clickable:!0},e))]})]})]})};export{_ as default};
